#!/bin/env sh

# update dotfiles - restow everything

which stow >/dev/null || { dunstify " Stow dotfiles" "Stow is not installed!" && exit 1; }

repos_dir="$HOME/.source"
dotfiles_dir="dotfiles"

[ -d "$repos_dir" ] || { dunstify  " Stow dotfiles" "Directory \"$repos_dir\" does not exist!" && exit 1; }
[ -d "$repos_dir/$dotfiles_dir" ] || { dunstify  " Stow dotfiles" "Directory \"$dotfiles_dir\" does not exist!" && exit 1; }

stow -d "$repos_dir" -R "$dotfiles_dir" && dunstify " Stow dotfiles" "Updated dotfiles" || { dunstify " Stow dotfiles" "Something failed!" && exit 1; }
